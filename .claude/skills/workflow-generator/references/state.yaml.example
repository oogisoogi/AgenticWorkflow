# state.yaml — SOT (Single Source of Truth) 템플릿
# 워크플로우 실행 시 Orchestrator/Team Lead만 이 파일을 수정한다 (절대 기준 2).
# 모든 에이전트는 읽기 전용으로 접근한다.

workflow:
  name: "[워크플로우 이름]"
  current_step: 1
  status: "in_progress"     # in_progress | completed | failed

  # 단계별 산출물 경로 — Anti-Skip Guard가 파일 존재 + 최소 크기(100 bytes) 검증
  outputs:
    # step-1: "research/collected-data.md"
    # step-1-ko: "research/collected-data.ko.md"   # @translator 번역본
    # step-2: "research/insights.md"

  # (human) 단계 상태 — Autopilot 모드에서 자동 승인 추적
  pending_human_action:
    step: null               # 현재 대기 중인 (human) 단계 번호
    options: []              # 선택지 목록

  # --- Agent Team 활성 시 추가 (team 단계 진행 중일 때만) ---
  # active_team:
  #   name: "[team-name]"              # TeamCreate에 전달한 이름
  #   status: "partial"                # D-4: 허용 값: partial (진행 중) | all_completed (모든 Task 완료)
  #   tasks_completed: []              # 완료된 Task ID
  #   tasks_pending: []                # 미완료 Task ID
  #   completed_summaries:             # RLM Layer 2 — 세션 복원 시 팀 맥락 보존
  #     task-1:
  #       agent: "@[agent-name]"
  #       model: "[opus|sonnet|haiku]"
  #       output: "[산출물 경로]"
  #       summary: "[1-2문장 작업 요약]"
  # completed_teams: []                # 완료된 팀 이력 (감사 추적)

  # --- Autopilot 모드 활성 시 추가 (AGENTS.md §5.1 정본 스키마) ---
  # autopilot:
  #   enabled: false                   # true | false
  #   decision_log_dir: "autopilot-logs/"
  #   auto_approved_steps: []          # 자동 승인된 (human) 단계 목록

  # --- pACS 활성 시 추가 (AGENTS.md §5.4) ---
  # pacs:
  #   min_score: null                  # 최근 pACS min-score (Hook이 읽기 전용 참조)
  #   step_scores:                     # 단계별 pACS 이력
  #     step-1: 82                     # min(F, C, L) 결과
  #     step-2: 75

  # --- Verification 이력 (AGENTS.md §5.3) ---
  # verification:
  #   last_verified_step: 2            # 마지막 검증 통과 단계
  #   retries:                         # 재시도 이력 (최대 2회)
  #     step-2: 1                      # step-2에서 1회 재시도 발생
